<html>

<head>
  <title>
    {% if df is defined and not df.empty %}
    {{ df[df['tag'] == 'prodname']['value'].iloc[0] | default('') }}
    {% else %}
    HP Product Information
    {% endif %}
  </title>
  <meta charset="UTF-8" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/product_styles.css') }}" />
  <link href="https://syndication.inc.hp.com/hpi-favicon.ico" type="image/ico" rel="shortcut icon" />

  <script src="https://www8.hp.com/caas/header-footer/us/en/default/latest.r?contentType=js"></script>
</head>

<body>
  <div id="header" class="header"></div>

  {% if df is defined and not df.empty %}
  <div id="ATF" class="superscript-content">
    <div class="content-card country-selector">
      <div class="locale-dropdown">
        <button class="locale-btn">
          <i class="bi bi-globe"></i>
          <span>{{ current_locale or 'Select Locale' }}</span>
          <i class="bi bi-chevron-down"></i>
        </button>
        <div class="locale-dropdown-content">
          {% if locales %}
          {% for locale in locales %}
          <a href="#" data-locale="{{ locale }}" data-sku="{{ sku }}"
            class="locale-option {% if locale == current_locale %}selected{% endif %}">{{ locale }}</a>
          {% endfor %}
          {% else %}
          <a href="#" class="locale-option disabled">No locales available</a>
          {% endif %}
        </div>
      </div>
    </div>
    <div class="content-card product-header">
      <h1><span id="prodname">{{ df[df['tag'] == 'prodname']['value'].iloc[0] | default('') }}</span></h1>

    </div>

    {% if df_images is defined and not df_images.empty %}
    <div class="content-card">
      <div class="bordered-section">
        <div class="product-gallery-main"></div>
        <div class="product-gallery-thumbs">
          {% for index, row in df_images.iterrows() %}
          <img class="thumb-item" src="{{ row['imageUrlHttps'] | default('') }}"
            data-full-image="{{ row['imageUrlHttps'] | default('') }}" alt="{{ row['orientation'] | default('') }}">
          {% endfor %}
          {% if video_data %}
          <div class="thumb-item-container">
            <img class="thumb-item" src="{{ video_data.previewURL }}" data-video-source="{{ video_data.assetUrl }}"
              alt="360 Spin Video">
            <div class="video-overlay">Video</div>
          </div>
          {% endif %}
        </div>
      </div>
    </div>
    {% endif %}

    {% set description_series = df[df['tag'] == 'proddes_overview_extended']['value'] %}
    {% if description_series is defined and not description_series.empty and description_series.iloc[0] %}
    <div class="content-card">
      <div class="product-description">
        <p>{{ description_series.iloc[0] | default('') }}</p>
      </div>
    </div>
    {% endif %}

    {% if mm_blocks %}
    <div id="MM" class="superscript-content">
      <div class="content-card">
        <div class="mm-grid">
          {% for block in mm_blocks %}
          <div class="bordered-section">
            <div class="mm-image">
              <img src="{{ block.image_url | escape }}" alt="Marketing Image">
            </div>
            <div class="mm-text">
              {% if block.headline %}<h3 class="info-headline">{{ block.headline }}</h3>
              <hr class="section-divider">{% endif %}
              {% if block.support %}<p class="info-body">{{ block.support }}</p>{% endif %}
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
    </div>
    {% endif %}

    {% if feature_blocks %}
    <div id="features" class="content-card">
      <div class="features-grid">
        {% for block in feature_blocks %}
        <div class="feature-block">
          <div class="feature-image">
            <img src="{{ block.image_url | escape }}" alt="Feature Image">
          </div>
          <div class="feature-text">
            <h4 class="info-headline">{{ block.headline }}</h4>
            <hr class="section-divider">
            {% if block.support %}
            <p class="info-body">{{ block.support }}</p>
            {% endif %}
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
    {% endif %}

    {% if top_components %}
    <div id="top-components" class="content-card">
      <table class="tech-specs-table">
        <tbody>
          {% for component in top_components %}
          <tr>
            <td class="spec-label"><b>{{ component['name'] }}</b></td>
            <td class="spec-value">
              {{ component['value'] }}
              {% set ftnt_tag = component['tag'] ~ 'ftntnbr' %}
              {% if ftnt_tag in df['tag'].values %}
              {{ df[df['tag'] == ftnt_tag]['value'].iloc[0] | default('') }}
              {% endif %}
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    {% endif %}

    <h2 id="see-more" class="expand-button">Show All Specifications</h2>

    <div id="tech-specs" class="content-card" style="display: none;">
      <table class="tech-specs-table">
        <tbody>
          {% for group_name, specs in tech_specs_by_group %}
          <tr>
            <td colspan="2" class="group-header"><strong>{{ group_name }}</strong></td>
          </tr>
          {% for row in specs %}
          <tr>
            <td class="spec-label"><b>{{ row['name'] }}</b></td>
            <td class="spec-value">
              {{ row['value'] }}
              {% set ftnt_tag = row['tag'] ~ 'ftntnbr' %}
              {% if ftnt_tag in df['tag'].values %}
              {{ df[df['tag'] == ftnt_tag]['value'].iloc[0] | default('') }}
              {% endif %}
            </td>
          </tr>
          {% endfor %}
          {% endfor %}
        </tbody>
      </table>
    </div>

    {% if top_companions %}
    <div id="top-companions" class="content-card">
      <div class="companions-grid">
        {% for companion_type, companions in top_companions.items() %}
        {% for companion in companions %}
        <div class="companion-item">
          <img src="{{ companion.image_url | escape }}" alt="{{ companion.name | escape }}">
          <div class="companion-details">
            <p><b>{{ companion.name }}</b></p>
            <p>SKU: {{ companion.sku }}</p>
          </div>
        </div>
        {% endfor %}
        {% endfor %}
      </div>
    </div>
    {% endif %}

    {% if companions %}
    <h2 id="see-more-companions" class="expand-button">Show Companions</h2>

    <div id="companions" class="content-card" style="display: none;">
      <div class="companions-grid">
        {% for companion in companions %}
        <div class="companion-item">
          <img src="{{ companion.image_url | escape }}" alt="{{ companion.name | escape }}">
          <div class="companion-details">
            <p><b>{{ companion.name }}</b></p>
            <p>SKU: {{ companion.sku }}</p>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
    {% endif %}

    {% if (df_disclaimers is defined and not df_disclaimers.empty) or (df_footnotes is defined and not
    df_footnotes.empty) %}
    <h2 id="see-more-footnotes" class="expand-button">Show Footnotes</h2>

    <div id="footnotes" class="content-card" style="display: none;">
      <table class="footnotes-table">
        <tbody>
          {% if df_disclaimers is defined and not df_disclaimers.empty %}
          {% for index, row in df_disclaimers.iterrows() %}
          <tr>
            <td>{{ row['value'] | default('') }}</td>
          </tr>
          {% endfor %}
          {% endif %}
          {% if df_footnotes is defined and not df_footnotes.empty %}
          {% for index, row in df_footnotes.iterrows() %}
          <tr>
            <td>{{ row['value'] | default('') }}</td>
          </tr>
          {% endfor %}
          {% endif %}
        </tbody>
      </table>
    </div>
    {% endif %}
  </div>
  <script src="{{ url_for('static', filename='js/superscript.js') }}"></script>
  <script src="{{ url_for('static', filename='js/productGallery.js') }}"></script>
  <script src="{{ url_for('static', filename='js/localeRedirect.js') }}"></script>

  {% else %}
  <p>Detecting your location and redirecting you to the correct HP page...</p>
  <div id="redirect-info" data-pn="{{ pn }}" data-redirect-url="{{ url_for('call_get_product_from_qr') }}"></div>
  <script src="{{ url_for('static', filename='js/geoRedirect.js') }}"></script>
  {% endif %}

  <div class="footer-image-container">
    <img src="{{ url_for('static', filename='images/footer.png') }}" alt="Footer Image">
  </div>
  <div id="footer" class="footer"></div>
</body>

</html>